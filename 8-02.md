# Домашнее задание к занятию «Что такое DevOps. СI/СD»

### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в GitHub и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw.
   2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите сверху название занятия, ваши фамилию и имя;
      - в каждом задании добавьте решение в требуемом виде — текст, код, скриншоты, ссылка.
      - для корректного добавления скриншотов используйте [инструкцию «Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
      - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
   4. После завершения работы над домашним заданием сделайте коммит `git commit -m "comment"` и отправьте его на GitHub `git push origin`.
   5. Для проверки домашнего задания в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем GitHub.
   6. Любые вопросы по выполнению заданий задавайте в чате учебной группы или в разделе «Вопросы по заданию» в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!

---

### Задание 1

**Что нужно сделать:**

1. Установите себе jenkins по инструкции из лекции или любым другим способом из официальной документации. Использовать Docker в этом задании нежелательно.
2. Установите на машину с jenkins [golang](https://golang.org/doc/install).
3. Используя свой аккаунт на GitHub, сделайте себе форк [репозитория](https://github.com/netology-code/sdvps-materials.git). В этом же репозитории находится [дополнительный материал для выполнения ДЗ](https://github.com/netology-code/sdvps-materials/blob/main/CICD/8.2-hw.md).
3. Создайте в jenkins Freestyle Project, подключите получившийся репозиторий к нему и произведите запуск тестов и сборку проекта ```go test .``` и  ```docker build .```.

В качестве ответа пришлите скриншоты с настройками проекта и результатами выполнения сборки.
![VirtualBox_ubuntus_02_04_2025_20_26_18](https://github.com/user-attachments/assets/b88dba2e-3bb4-4641-8d5e-bd4b1297831f)
![2025-04-02_20-39-55](https://github.com/user-attachments/assets/5860d6de-c563-454d-908d-e55e9b04ab72)
![pip1_edited](https://github.com/user-attachments/assets/6b2e5fcc-2b9d-4b75-897d-96e526e02866)
![conf_edited](https://github.com/user-attachments/assets/ed2c045a-ba00-43a9-82ac-133b843d2f41)

---

### Задание 2

**Что нужно сделать:**

1. Создайте новый проект pipeline.
2. Перепишите сборку из задания 1 на declarative в виде кода.

В качестве ответа пришлите скриншоты с настройками проекта и результатами выполнения сборки.
![pipe2tim_edited](https://github.com/user-attachments/assets/08a115df-5b1f-48a0-95bf-872930731fff)
![pipe2_edited](https://github.com/user-attachments/assets/9742a402-a2a6-4419-8bf1-1c437d11589a)
![pip2_edited](https://github.com/user-attachments/assets/3098cf67-9a9e-4c60-a249-b3c6448e3723)





 pipeline {
    agent any
    stages {
        stage('Git Checkout') {
            steps {
                git url: 'https://github.com/dreadnone/sdvps-materials.git'
            }
        }

        stage('Test') {
            steps {
                sh '/usr/bin/go test .'
            }
        }

        stage('Build Docker Image') {
            steps {
                dir('/home/andrew/sdvps-materials') {
                    sh """
                        docker build . -t ubuntu-bionic:8082/hello-world:v${env.BUILD_NUMBER}
                    """
                }
            }
---

### Задание 3

**Что нужно сделать:**

1. Установите на машину Nexus.
1. Создайте raw-hosted репозиторий.
1. Измените pipeline так, чтобы вместо Docker-образа собирался бинарный go-файл. Команду можно скопировать из Dockerfile.
1. Загрузите файл в репозиторий с помощью jenkins.

В качестве ответа пришлите скриншоты с настройками проекта и результатами выполнения сборки.
 pipeline {
    agent any
    stages {
        stage('Checkout') {
            steps {
                git url: 'https://github.com/dreadnone/sdvps-materials.git' // Указывай свой форк
            }
        }
        stage('Test') {
            steps {
                sh '/usr/bin/go test ./...' // Рекурсивное тестирование всех пакетов
            }
        }
        stage('Build') {
            steps {
                sh 'CGO_ENABLED=0 GOOS=linux GOARCH=amd64 /usr/bin/go build -o app' // Собираем исполняемый файл
            }
        }
        stage('push') {
            steps {
                withCredentials([usernamePassword(credentialsId: '1', usernameVariable: 'admin', passwordVariable: 'admin')]) {
                    sh '''
                        curl -u admin:admin \
                            http://localhost:8081/repository/raw-go/ \
                            --upload-file app
                   
                }
            }
      
![conf_edited](https://github.com/user-attachments/assets/1003a0a9-eb05-4cf2-a638-fe8b82b6a88d)
![cicd1_edited](https://github.com/user-attachments/assets/76658315-9df9-4a12-803c-1055b35d287e)
 

---
## Дополнительные задания* (со звёздочкой)

Их выполнение необязательное и не влияет на получение зачёта по домашнему заданию. Можете их решить, если хотите лучше разобраться в материале.

---

### Задание 4*

Придумайте способ версионировать приложение, чтобы каждый следующий запуск сборки присваивал имени файла новую версию. Таким образом, в репозитории Nexus будет храниться история релизов.

Подсказка: используйте переменную BUILD_NUMBER.

В качестве ответа пришлите скриншоты с настройками проекта и результатами выполнения сборки.
ответ:









