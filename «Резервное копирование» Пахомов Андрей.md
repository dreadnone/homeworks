# Домашнее задание к занятию 3 «Резервное копирование» Пахомов Андрей

### Цель задания
В результате выполнения этого задания вы научитесь:
1. Настраивать регулярные задачи на резервное копирование (полная зеркальная копия)
2. Настраивать инкрементное резервное копирование с помощью rsync

------

### Чеклист готовности к домашнему заданию

1. Установлена операционная система Ubuntu на виртуальную машину и имеется доступ к терминалу
2. Сделан клон этой виртуальной машины с другим IP адресом


------

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды git clone.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (git commit -m "comment") и отправьте его на Github (git push origin).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.



------



### Задание 1
- Составьте команду rsync, которая позволяет создавать зеркальную копию домашней директории пользователя в директорию `/tmp/backup`
- Необходимо исключить из синхронизации все директории, начинающиеся с точки (скрытые)
- Необходимо сделать так, чтобы rsync подсчитывал хэш-суммы для всех файлов, даже если их время модификации и размер идентичны в источнике и приемнике.
- На проверку направить скриншот с командой и результатом ее выполнения
#### Команда
```
rsync -avh --delete --checksum --exclude='.*/' /home/andrew /tmp/backup
```
![Снимок экрана от 2025-05-26 12-29-18](https://github.com/user-attachments/assets/b882a2db-a259-4362-9f49-7e8053cc3dde)


### Задание 2
- Написать скрипт и настроить задачу на регулярное резервное копирование домашней директории пользователя с помощью rsync и cron.
- Резервная копия должна быть полностью зеркальной
- Резервная копия должна создаваться раз в день, в системном логе должна появляться запись об успешном или неуспешном выполнении операции
- Резервная копия размещается локально, в директории `/tmp/backup`
- На проверку направить файл crontab и скриншот с результатом работы утилиты.

#### Скрипт
```
#!/bin/bash

rsync -avh --delete --checksum  /home/andrew /tmp/backup > /tmp/backup/backup_dz_plus.log
if [ $? -eq 0 ]; then
        echo "$(date) - Резервное копирование выполнено успешно" >> /var/log/backup_dz.log
else
        echo "$(date) - Резервное копирование не выполнено" >> /var/log/backup_dz.log
fi
```
![Снимок экрана от 2025-05-26 12-37-25](https://github.com/user-attachments/assets/555787bd-ebf7-46c7-88b8-db0d75693c70)

![Снимок экрана от 2025-05-26 12-57-37](https://github.com/user-attachments/assets/e7a49f0a-b950-4e2f-a63f-5045adc6828f)
#### Файл crontab
![Снимок экрана от 2025-05-26 12-50-53](https://github.com/user-attachments/assets/fa6f9c40-78b4-4353-8cdc-a61fc8e3caa6)

---
